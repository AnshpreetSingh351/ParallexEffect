<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>3D Room Gyro Gallery</title>
<style>
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  height: 100vh;
  overflow: hidden;
  background: #0b0b0b;
  font-family: system-ui, sans-serif;
  perspective: 1200px;
}

.scene {
  width: 100%;
  height: 100vh;
  position: relative;
  transform-style: preserve-3d;
  display: flex;
  align-items: center;
  justify-content: center;
}

.room {
  position: relative;
  width: 100vw;
  height: 100vh;
  transform-style: preserve-3d;
}

/* Walls */
.wall {
  position: absolute;
  width: 100vw;
  height: 100vh;
  background-size: cover;
  background-position: center;
}

/* Back wall */
.wall.back {
  transform: translateZ(-500px);
  background-image: url("https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80&w=1600&auto=format&fit=crop");
  filter: brightness(0.8);
}

/* Left wall */
.wall.left {
  width: 1000px;
  transform: rotateY(90deg) translateZ(-500px);
  transform-origin: left center;
  background: linear-gradient(135deg, #111, #222);
}

/* Right wall */
.wall.right {
  width: 1000px;
  right: 0;
  transform: rotateY(-90deg) translateZ(-500px);
  transform-origin: right center;
  background: linear-gradient(135deg, #111, #222);
}

/* Floor */
.floor {
  position: absolute;
  width: 100vw;
  height: 1000px;
  bottom: 0;
  transform: rotateX(90deg) translateZ(-500px);
  transform-origin: bottom center;
  background: linear-gradient(#0a0a0a, #050505);
}

/* Frames */
.frame {
  position: absolute;
  width: 240px;
  height: 160px;
  background-size: cover;
  background-position: center;
  border-radius: 12px;
  box-shadow: 0 20px 60px rgba(0,0,0,0.6);
  transform-style: preserve-3d;
}

/* Place frames in space */
.frame.one {
  transform: translateZ(-300px) translateX(-200px) translateY(-50px);
  background-image: url("https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=800&auto=format&fit=crop");
}
.frame.two {
  transform: translateZ(-200px) translateX(200px) translateY(50px);
  background-image: url("https://images.unsplash.com/photo-1502082553048-f009c37129b9?q=80&w=800&auto=format&fit=crop");
}
.frame.three {
  transform: translateZ(-400px) translateX(0px) translateY(100px);
  background-image: url("https://images.unsplash.com/photo-1491553895911-0055eca6402d?q=80&w=800&auto=format&fit=crop");
}

/* Title */
.title {
  position: absolute;
  top: 40px;
  left: 50%;
  transform: translateX(-50%) translateZ(50px);
  color: white;
  font-size: clamp(1.8rem, 5vw, 3rem);
  font-weight: 700;
  letter-spacing: 3px;
  text-shadow: 0 10px 40px rgba(0,0,0,0.8);
}

.hint {
  position: fixed;
  bottom: 20px;
  width: 100%;
  text-align: center;
  color: #aaa;
  font-size: 14px;
  opacity: 0.8;
}
</style>
</head>
<body>

<div class="scene">
  <div class="room" id="room">
    <div class="wall back"></div>
    <div class="wall left"></div>
    <div class="wall right"></div>
    <div class="floor"></div>

    <div class="frame one"></div>
    <div class="frame two"></div>
    <div class="frame three"></div>

    <div class="title">3D GALLERY</div>
  </div>
</div>

<div class="hint">Tilt your phone to move the camera ðŸŽ¥</div>

<script>
const room = document.getElementById("room");

let targetX = 0, targetY = 0;
let currentX = 0, currentY = 0;

// Smooth camera movement
function animate() {
  currentX += (targetX - currentX) * 0.08;
  currentY += (targetY - currentY) * 0.08;

  room.style.transform = `
    rotateY(${currentX}deg)
    rotateX(${currentY}deg)
  `;

  requestAnimationFrame(animate);
}

function handleOrientation(e) {
  const gamma = e.gamma || 0; // left-right
  const beta = e.beta || 0;   // front-back

  targetX = gamma * 0.3;
  targetY = -beta * 0.3;
}

// iOS permission
function requestPermissionIfNeeded() {
  if (
    typeof DeviceOrientationEvent !== "undefined" &&
    typeof DeviceOrientationEvent.requestPermission === "function"
  ) {
    DeviceOrientationEvent.requestPermission().then(response => {
      if (response === "granted") {
        window.addEventListener("deviceorientation", handleOrientation);
      } else {
        alert("Motion permission denied");
      }
    });
  } else {
    window.addEventListener("deviceorientation", handleOrientation);
  }
}

document.body.addEventListener("click", requestPermissionIfNeeded, { once: true });

animate();
</script>

</body>
</html>
